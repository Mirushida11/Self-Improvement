<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Improvement Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        body.dark-mode {
            background-color: #1a1a1a;
            color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-toggle {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
        }

        .dark-mode .theme-toggle {
            background: #764ba2;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .dark-mode .section {
            background: #2d2d2d;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        h2 {
            margin-bottom: 20px;
            color: #667eea;
        }

        .dark-mode h2 {
            color: #9f7aea;
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .prayer-item {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .prayer-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .schedule-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9rem;
            width: 100px;
        }

        .dark-mode .schedule-input {
            background: #3d3d3d;
            border-color: #555;
            color: white;
        }

        .workout-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 15px 0;
        }

        .workout-day-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }

        .dark-mode .workout-day-card {
            background: #3d3d3d;
        }

        .workout-day-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .workout-day-header input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .workout-day-header label {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .workout-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .dark-mode .workout-input {
            background: #2d2d2d;
            border-color: #555;
            color: white;
        }

        .workout-exercises {
            margin-top: 10px;
        }

        .exercise-item {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
        }

        .exercise-item input {
            flex: 1;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }

        .dark-mode .exercise-item input {
            background: #2d2d2d;
            border-color: #555;
            color: white;
        }

        .add-exercise-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .remove-exercise-btn {
            background: #f56565;
            color: white;
            border: none;
            padding: 5px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .habit-section {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .habit-input {
            flex: 1;
            min-width: 200px;
        }

        .habit-input input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .dark-mode .habit-input input {
            background: #3d3d3d;
            border-color: #555;
            color: white;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
        }

        button:hover {
            background: #764ba2;
        }

        .counter {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin: 15px 0;
        }

        .sleep-tracker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 15px 0;
        }

        .sleep-input {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sleep-input label {
            font-weight: bold;
        }

        .sleep-input input[type="number"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .dark-mode .sleep-input input {
            background: #3d3d3d;
            border-color: #555;
            color: white;
        }

        .progress-view {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .dark-mode .progress-view {
            background: #3d3d3d;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .dark-mode .stat-card {
            background: #2d2d2d;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .workout-details {
            font-size: 0.9rem;
            text-align: left;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }

        .dark-mode .workout-details {
            border-top-color: #555;
        }

        .toggle-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-section {
            display: none;
        }

        .view-section.active {
            display: block;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .habit-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŒŸ Self Improvement Tracker</h1>
            <button class="theme-toggle" onclick="toggleTheme()">Switch to Dark Mode</button>
        </header>

        <div class="toggle-buttons">
            <button onclick="showSection('tracker')">Daily Tracker</button>
            <button onclick="showSection('progress')">View Progress</button>
        </div>

        <!-- Daily Tracker Section -->
        <div id="tracker-section" class="view-section active">
            <!-- Prayer Section -->
            <div class="section">
                <h2>ðŸ•Œ Daily Prayers</h2>
                <div class="prayer-grid">
                    <div class="prayer-item">
                        <input type="checkbox" id="fajr" onchange="savePrayers()">
                        <label for="fajr">Fajr</label>
                        <input type="time" class="schedule-input" id="fajr-time" onchange="saveSchedule()">
                    </div>
                    <div class="prayer-item">
                        <input type="checkbox" id="dhuhr" onchange="savePrayers()">
                        <label for="dhuhr">Dhuhr</label>
                        <input type="time" class="schedule-input" id="dhuhr-time" onchange="saveSchedule()">
                    </div>
                    <div class="prayer-item">
                        <input type="checkbox" id="asr" onchange="savePrayers()">
                        <label for="asr">Asr</label>
                        <input type="time" class="schedule-input" id="asr-time" onchange="saveSchedule()">
                    </div>
                    <div class="prayer-item">
                        <input type="checkbox" id="maghrib" onchange="savePrayers()">
                        <label for="maghrib">Maghrib</label>
                        <input type="time" class="schedule-input" id="maghrib-time" onchange="saveSchedule()">
                    </div>
                    <div class="prayer-item">
                        <input type="checkbox" id="isha" onchange="savePrayers()">
                        <label for="isha">Isha</label>
                        <input type="time" class="schedule-input" id="isha-time" onchange="saveSchedule()">
                    </div>
                </div>
            </div>

            <!-- Workout Section with Specific Exercises -->
            <div class="section">
                <h2>ðŸ’ª Workout Planner</h2>
                <div class="workout-container" id="workout-container">
                    <!-- Workout days will be dynamically generated here -->
                </div>
                <button onclick="saveAllWorkouts()">Save All Workouts</button>
            </div>

            <!-- Habit Tracker Section -->
            <div class="section">
                <h2>ðŸš« Bad Habit Tracker</h2>
                <div class="habit-section">
                    <div class="habit-input">
                        <input type="text" id="bad-habit" placeholder="Enter habit to stop (e.g., smoking)">
                        <button onclick="setHabit()">Set Habit</button>
                    </div>
                    <div style="flex: 2;">
                        <div class="counter" id="habit-counter">0</div>
                        <p style="text-align: center;" id="habit-name">No habit set</p>
                        <div style="text-align: center;">
                            <button onclick="incrementHabit()">+1 Day Successful</button>
                            <button onclick="resetHabit()">Reset Counter</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sleep and Nutrition Section -->
            <div class="section">
                <h2>ðŸ˜´ Sleep & Nutrition</h2>
                <div class="sleep-tracker">
                    <div class="sleep-input">
                        <label>Hours of Sleep:</label>
                        <input type="number" id="sleep-hours" min="0" max="24" step="0.5" onchange="saveSleep()">
                    </div>
                    <div class="sleep-input">
                        <label>Ate Well Today?</label>
                        <div>
                            <input type="radio" name="nutrition" id="ate-yes" value="yes" onchange="saveNutrition()">
                            <label for="ate-yes">Yes</label>
                            <input type="radio" name="nutrition" id="ate-no" value="no" onchange="saveNutrition()">
                            <label for="ate-no">No</label>
                        </div>
                    </div>
                </div>
                <button onclick="saveDaily()">Save Today's Progress</button>
            </div>
        </div>

        <!-- Progress View Section -->
        <div id="progress-section" class="view-section">
            <div class="section">
                <h2>ðŸ“Š Your Progress</h2>
                <div class="progress-stats" id="progress-stats">
                    <!-- Progress stats will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize local storage
        let progressData = JSON.parse(localStorage.getItem('progressData')) || [];
        let currentHabit = localStorage.getItem('currentHabit') || '';
        let habitCount = parseInt(localStorage.getItem('habitCount')) || 0;
        let prayers = JSON.parse(localStorage.getItem('prayers')) || {};
        let schedule = JSON.parse(localStorage.getItem('schedule')) || {};
        
        // Initialize workouts data structure
        let workouts = JSON.parse(localStorage.getItem('workouts')) || {
            monday: { checked: false, exercises: [''] },
            tuesday: { checked: false, exercises: [''] },
            wednesday: { checked: false, exercises: [''] },
            thursday: { checked: false, exercises: [''] },
            friday: { checked: false, exercises: [''] },
            saturday: { checked: false, exercises: [''] },
            sunday: { checked: false, exercises: [''] }
        };

        const daysOfWeek = [
            { id: 'monday', label: 'Monday' },
            { id: 'tuesday', label: 'Tuesday' },
            { id: 'wednesday', label: 'Wednesday' },
            { id: 'thursday', label: 'Thursday' },
            { id: 'friday', label: 'Friday' },
            { id: 'saturday', label: 'Saturday' },
            { id: 'sunday', label: 'Sunday' }
        ];

        // Load saved data on page load
        window.onload = function() {
            loadPrayers();
            loadSchedule();
            renderWorkoutPlanner();
            loadHabit();
            loadTheme();
            loadSleep();
            loadNutrition();
            updateProgressView();
        };

        // Theme toggle
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const button = document.querySelector('.theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                button.textContent = 'Switch to Light Mode';
                localStorage.setItem('theme', 'dark');
            } else {
                button.textContent = 'Switch to Dark Mode';
                localStorage.setItem('theme', 'light');
            }
        }

        function loadTheme() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-toggle').textContent = 'Switch to Light Mode';
            }
        }

        // Section toggle
        function showSection(section) {
            document.getElementById('tracker-section').classList.remove('active');
            document.getElementById('progress-section').classList.remove('active');
            
            if (section === 'tracker') {
                document.getElementById('tracker-section').classList.add('active');
            } else {
                document.getElementById('progress-section').classList.add('active');
                updateProgressView();
            }
        }

        // Prayer functions
        function savePrayers() {
            const prayerIds = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
            prayerIds.forEach(id => {
                prayers[id] = document.getElementById(id).checked;
            });
            localStorage.setItem('prayers', JSON.stringify(prayers));
        }

        function loadPrayers() {
            const prayerIds = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
            prayerIds.forEach(id => {
                if (prayers[id] !== undefined) {
                    document.getElementById(id).checked = prayers[id];
                }
            });
        }

        // Schedule functions
        function saveSchedule() {
            const prayerIds = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
            prayerIds.forEach(id => {
                schedule[id] = document.getElementById(id + '-time').value;
            });
            localStorage.setItem('schedule', JSON.stringify(schedule));
        }

        function loadSchedule() {
            const prayerIds = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
            prayerIds.forEach(id => {
                if (schedule[id]) {
                    document.getElementById(id + '-time').value = schedule[id];
                }
            });
        }

        // Enhanced Workout functions
        function renderWorkoutPlanner() {
            const container = document.getElementById('workout-container');
            container.innerHTML = '';

            daysOfWeek.forEach(day => {
                const dayData = workouts[day.id] || { checked: false, exercises: [''] };
                
                const card = document.createElement('div');
                card.className = 'workout-day-card';
                card.innerHTML = `
                    <div class="workout-day-header">
                        <input type="checkbox" id="${day.id}" ${dayData.checked ? 'checked' : ''} onchange="toggleWorkoutDay('${day.id}')">
                        <label for="${day.id}">${day.label}</label>
                    </div>
                    <div class="workout-exercises" id="exercises-${day.id}">
                        ${renderExercises(day.id, dayData.exercises)}
                    </div>
                    <button class="add-exercise-btn" onclick="addExercise('${day.id}')">+ Add Exercise</button>
                `;
                container.appendChild(card);
            });
        }

        function renderExercises(dayId, exercises) {
            let html = '';
            exercises.forEach((exercise, index) => {
                html += `
                    <div class="exercise-item">
                        <input type="text" id="${dayId}-exercise-${index}" value="${exercise || ''}" placeholder="e.g., Bench Press 3x10" onchange="updateExercise('${dayId}', ${index}, this.value)">
                        ${exercises.length > 1 ? `<button class="remove-exercise-btn" onclick="removeExercise('${dayId}', ${index})">âœ•</button>` : ''}
                    </div>
                `;
            });
            return html;
        }

        function toggleWorkoutDay(dayId) {
            const checkbox = document.getElementById(dayId);
            workouts[dayId].checked = checkbox.checked;
            localStorage.setItem('workouts', JSON.stringify(workouts));
        }

        function addExercise(dayId) {
            if (!workouts[dayId].exercises) {
                workouts[dayId].exercises = [];
            }
            workouts[dayId].exercises.push('');
            localStorage.setItem('workouts', JSON.stringify(workouts));
            renderWorkoutPlanner();
        }

        function removeExercise(dayId, index) {
            workouts[dayId].exercises.splice(index, 1);
            if (workouts[dayId].exercises.length === 0) {
                workouts[dayId].exercises = [''];
            }
            localStorage.setItem('workouts', JSON.stringify(workouts));
            renderWorkoutPlanner();
        }

        function updateExercise(dayId, index, value) {
            workouts[dayId].exercises[index] = value;
            localStorage.setItem('workouts', JSON.stringify(workouts));
        }

        function saveAllWorkouts() {
            localStorage.setItem('workouts', JSON.stringify(workouts));
            alert('All workouts saved!');
        }

        // Habit functions
        function setHabit() {
            const habitInput = document.getElementById('bad-habit');
            if (habitInput.value) {
                currentHabit = habitInput.value;
                localStorage.setItem('currentHabit', currentHabit);
                document.getElementById('habit-name').textContent = `Stopping: ${currentHabit}`;
                habitInput.value = '';
            }
        }

        function incrementHabit() {
            if (currentHabit) {
                habitCount++;
                localStorage.setItem('habitCount', habitCount);
                document.getElementById('habit-counter').textContent = habitCount;
            } else {
                alert('Please set a habit first!');
            }
        }

        function resetHabit() {
            habitCount = 0;
            localStorage.setItem('habitCount', habitCount);
            document.getElementById('habit-counter').textContent = habitCount;
        }

        function loadHabit() {
            if (currentHabit) {
                document.getElementById('habit-name').textContent = `Stopping: ${currentHabit}`;
                document.getElementById('habit-counter').textContent = habitCount;
            }
        }

        // Sleep and nutrition functions
        function saveSleep() {
            const sleepHours = document.getElementById('sleep-hours').value;
            localStorage.setItem('sleepHours', sleepHours);
        }

        function loadSleep() {
            const sleepHours = localStorage.getItem('sleepHours');
            if (sleepHours) {
                document.getElementById('sleep-hours').value = sleepHours;
            }
        }

        function saveNutrition() {
            const nutrition = document.querySelector('input[name="nutrition"]:checked');
            if (nutrition) {
                localStorage.setItem('nutrition', nutrition.value);
            }
        }

        function loadNutrition() {
            const nutrition = localStorage.getItem('nutrition');
            if (nutrition) {
                document.getElementById(`ate-${nutrition}`).checked = true;
            }
        }

        // Save daily progress
        function saveDaily() {
            const today = new Date().toLocaleDateString();
            const sleepHours = document.getElementById('sleep-hours').value;
            const nutrition = document.querySelector('input[name="nutrition"]:checked')?.value;
            
            const dailyProgress = {
                date: today,
                prayers: {...prayers},
                workouts: JSON.parse(JSON.stringify(workouts)), // Deep copy
                habit: {
                    name: currentHabit,
                    count: habitCount
                },
                sleep: sleepHours,
                nutrition: nutrition
            };
            
            progressData.push(dailyProgress);
            localStorage.setItem('progressData', JSON.stringify(progressData));
            alert('Progress saved for ' + today);
        }

        // Update progress view
        function updateProgressView() {
            const statsDiv = document.getElementById('progress-stats');
            if (progressData.length === 0) {
                statsDiv.innerHTML = '<p>No progress data yet. Start tracking today!</p>';
                return;
            }

            const last7Days = progressData.slice(-7);
            let statsHTML = '';

            last7Days.forEach(day => {
                const prayersCompleted = Object.values(day.prayers).filter(Boolean).length;
                
                // Count days with workouts checked
                let workoutDays = 0;
                let workoutDetails = [];
                if (day.workouts) {
                    Object.entries(day.workouts).forEach(([dayName, dayData]) => {
                        if (dayData.checked) {
                            workoutDays++;
                            const exercises = dayData.exercises.filter(ex => ex.trim() !== '');
                            if (exercises.length > 0) {
                                workoutDetails.push(`
                                    <div style="margin-top: 5px;">
                                        <strong>${dayName}:</strong>
                                        <ul style="margin: 5px 0 5px 20px;">
                                            ${exercises.map(ex => `<li>${ex}</li>`).join('')}
                                        </ul>
                                    </div>
                                `);
                            }
                        }
                    });
                }
                
                statsHTML += `
                    <div class="stat-card">
                        <h3>${day.date}</h3>
                        <div class="stat-value">${prayersCompleted}/5 Prayers</div>
                        <div>Workout Days: ${workoutDays}/7</div>
                        ${workoutDetails.length > 0 ? `
                            <div class="workout-details">
                                <strong>Workout Details:</strong>
                                ${workoutDetails.join('')}
                            </div>
                        ` : ''}
                        <div>Sleep: ${day.sleep || '-'} hours</div>
                        <div>Nutrition: ${day.nutrition || '-'}</div>
                        <div>Habit streak: ${day.habit?.count || 0} days</div>
                    </div>
                `;
            });

            // Add summary stats
            const totalPrayers = progressData.reduce((sum, day) => 
                sum + Object.values(day.prayers).filter(Boolean).length, 0);
            const avgPrayers = (totalPrayers / progressData.length).toFixed(1);

            statsHTML = `
                <div class="stat-card">
                    <h3>Overall Stats</h3>
                    <div class="stat-value">${avgPrayers}/5</div>
                    <div>Avg. Daily Prayers</div>
                    <div>Days Tracked: ${progressData.length}</div>
                </div>
            ` + statsHTML;

            statsDiv.innerHTML = statsHTML;
        }
    </script>
</body>
</html>